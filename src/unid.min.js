class UNID{#a=0;#b=0;static #c="3y|DWs^oH2%I'k\"qUmY6Q9.(rNLJ,j0`]P$5?CzM*><=@Kn~&a;OwEf)[xhZBpSGlg}-b/cX:{#AvR7Tu+ei4d_!1F\\8tV";static #d=new Map(UNID.#c.split("").map((t,e)=>[t,e]));static #e=["267548103","423108567","046238157","762518043","107568324","246538107","154378062","051478632","103248657","071348625"];static #f=UNID.#e.map(t=>t.split("").map(t=>+t));static #g=["jzG[T}S","XJvrYAZ","y^0[z9+","|)BJ?Z%","Ov|UZbW","E}evqX:",'"ulKWD}',"P(}/2bZ","i.w~lY%","q[$+Y@3","c$^zP6)",'BE"-|,>',"],6s-aD","[0dY3aH","gpYw4x~","w}R}zOa","vCK2T&[","`e|qe?%","BYr0[=y",':f"?~X?',"L]xC@^3",',)E["}#',"5OX|BA~","Yk2CbvU","ZH6e(Wx","Y{3nA7P","./YHm,`",'3"2gzNB',"uO*Dep~","}jp+Pl,"];static #h=UNID.#g.map(t=>t.split("").map(t=>UNID.#d.get(t)));static #i(t,e,a,r){for(let s=r-1;s>=0;s--)t[s]=e%a,e=Math.floor(e/a)}static #j($,n){let c=0;for(let i=0;i<$.length;i++)c+=$[i]*Math.pow(n,$.length-1-i);return c}static #k(I,l){if(0==(l=(l%8+8)%8))return;let o=I.slice(-l);I.copyWithin(l,0,8-l),I.set(o,0)}generateID(){let t=Date.now();this.#a!==t?(this.#a=t,this.#b=0):this.#b++;let e=new Uint8Array(9);UNID.#i(e,t,94,7),UNID.#i(e.subarray(7),this.#b,90,2);let a=this.#b%10,r=(crypto.getRandomValues(new Uint8Array(1))[0]/256*29|0)+1;e[0]=(e[0]-1)*30+r;let s=UNID.#h[r-1];for(let $=0;$<7;$++)e[$+1]=((e[$+1]+s[$]+a)%94+94)%94;UNID.#k(e.subarray(0,8),a);let n=UNID.#f[a],c="";for(let i=0;i<9;i++)c+=UNID.#c[e[n[i]]%94];return c}decodeID(t){let e=UNID.#d.get(t[5])%10,a=UNID.#f[e],r=new Uint8Array(9);for(let s=0;s<9;s++)r[a[s]]=UNID.#d.get(t[s]);UNID.#k(r.subarray(0,8),-e);let $=r[0]%30;r[0]=Math.ceil(r[0]/30);let n=UNID.#h[$-1];for(let c=0;c<7;c++)r[c+1]=((r[c+1]-n[c]-e)%94+94)%94;let i=UNID.#j(r.subarray(0,7),94),I=UNID.#j(r.subarray(7,9),90);return{timestamp:i,index:I}}}
